// Generated by Hebron at 4/3/2022 2:10:11 AM

using System;
using System.Runtime.InteropServices;
using Hebron.Runtime;

namespace SqliteSharp
{
	unsafe partial class Sqlite
	{
		public static void pcache1FreePage(PgHdr1* p)
		{
			PCache1* pCache;
			pCache = p->pCache;
			if ((p->isBulkLocal) != 0)
			{
				p->pNext = pCache->pFree;
				pCache->pFree = p;
			}
			else
			{
				pcache1Free(p->page.pBuf);
			}

			(*pCache->pnPurgeable)--;
		}
		public static void pcache1RemoveFromHash(PgHdr1* pPage, int freeFlag)
		{
			uint h = 0;
			PCache1* pCache = pPage->pCache;
			PgHdr1** pp;
			h = (uint)(pPage->iKey % pCache->nHash);
			for (pp = &pCache->apHash[h]; (*pp) != pPage; pp = &(*pp)->pNext)
			{
			}

			*pp = (*pp)->pNext;
			pCache->nPage--;
			if ((freeFlag) != 0)
				pcache1FreePage(pPage);
		}
	}
}