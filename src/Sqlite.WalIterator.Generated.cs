// Generated by Hebron at 4/3/2022 2:10:11 AM

using System;
using System.Runtime.InteropServices;
using Hebron.Runtime;

namespace SqliteSharp
{
	unsafe partial class Sqlite
	{
		public static void walIteratorFree(WalIterator p)
		{
			sqlite3_free(p);
		}
		public static int walIteratorNext(WalIterator p, uint* piPage, uint* piFrame)
		{
			uint iMin = 0;
			uint iRet = (uint)(0xFFFFFFFF);
			int i = 0;
			iMin = (uint)(p.iPrior);
			for (i = (int)(p.nSegment - 1); (i) >= (0); i--)
			{
				WalSegment* pSegment = &p.aSegment[i];
				while ((pSegment->iNext) < (pSegment->nEntry))
				{
					uint iPg = (uint)(pSegment->aPgno[pSegment->aIndex[pSegment->iNext]]);
					if ((iPg) > (iMin))
					{
						if ((iPg) < (iRet))
						{
							iRet = (uint)(iPg);
							*piFrame = (uint)(pSegment->iZero + pSegment->aIndex[pSegment->iNext]);
						}

						break;
					}

					pSegment->iNext++;
				}
			}

			*piPage = (uint)(p.iPrior = (uint)(iRet));
			return (((iRet) == (0xFFFFFFFF)) ? 1 : 0);
		}
	}
}